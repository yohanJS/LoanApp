<!doctype html>
<html lang="en" class="h-100">

<head>
    <title>Loan App: A Coding Project by Yohan Garcia</title>
    <link rel="icon" href="./img/loan.png">
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    
        <!--External StyleSheet-->
    <link href="./css/site.css" rel="stylesheet">

    <!--Font Awesome Icons-->
    <script src="https://kit.fontawesome.com/5db21ba9c6.js" crossorigin="anonymous"></script>
    <link rel="icon" href="./img/YG.svg" type="image/png">

    <!--Link Prism-->
    <link href="./css/prism.css" rel="stylesheet">
</head>

<body class="d-flex flex-column h-100">

    <!--Nav Section-->
    <div class="container-fluid bg-light shadow-lg">
        <nav>
            <div class="row p-3 text-center border-bottom">
                <div class="col">
                    <button class="links-container p-0">
                        <a href="./index.html" rel="noopener" class="text-dark text-decoration-none">
                            <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="currentColor" class="bi bi-house" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M2 13.5V7h1v6.5a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5V7h1v6.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5zm11-11V6l-2-2V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5z"/>
                                <path fill-rule="evenodd" d="M7.293 1.5a1 1 0 0 1 1.414 0l6.647 6.646a.5.5 0 0 1-.708.708L8 2.207 1.354 8.854a.5.5 0 1 1-.708-.708L7.293 1.5z"/>
                            </svg><br>Home
                        </a>
                    </button>
                    <button class="links-container p-0">
                        <a href="./app.html" rel="noopener" class="text-dark text-decoration-none">
                            <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="currentColor" class="bi bi-app-indicator" viewBox="0 0 16 16">
                                <path d="M5.5 2A3.5 3.5 0 0 0 2 5.5v5A3.5 3.5 0 0 0 5.5 14h5a3.5 3.5 0 0 0 3.5-3.5V8a.5.5 0 0 1 1 0v2.5a4.5 4.5 0 0 1-4.5 4.5h-5A4.5 4.5 0 0 1 1 10.5v-5A4.5 4.5 0 0 1 5.5 1H8a.5.5 0 0 1 0 1H5.5z"/>
                                <path d="M16 3a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
                            </svg><br>App
                        </a>
                    </button>
                    <button class="links-container p-0">
                        <a href="https://github.com/yohanJS/LoanApp" target="_blank" rel="noopener" class="text-dark text-decoration-none">
                            <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="currentColor" class="bi bi-git" viewBox="0 0 16 16">
                                <path d="M15.698 7.287 8.712.302a1.03 1.03 0 0 0-1.457 0l-1.45 1.45 1.84 1.84a1.223 1.223 0 0 1 1.55 1.56l1.773 1.774a1.224 1.224 0 0 1 1.267 2.025 1.226 1.226 0 0 1-2.002-1.334L8.58 5.963v4.353a1.226 1.226 0 1 1-1.008-.036V5.887a1.226 1.226 0 0 1-.666-1.608L5.093 2.465l-4.79 4.79a1.03 1.03 0 0 0 0 1.457l6.986 6.986a1.03 1.03 0 0 0 1.457 0l6.953-6.953a1.031 1.031 0 0 0 0-1.457"/>
                            </svg>
                        </a><br>Repo
                    </button>
                    <button class="links-container p-0">
                        <a href="https://yohanvaldes.me/" target="_blank" rel="noopener" class="text-dark text-decoration-none">
                            <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="currentColor" class="bi bi-file-person" viewBox="0 0 16 16">
                                <path d="M12 1a1 1 0 0 1 1 1v10.755S12 11 8 11s-5 1.755-5 1.755V2a1 1 0 0 1 1-1h8zM4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H4z"/>
                                <path d="M8 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
                            </svg><br>About 
                        </a>
                    </button>
                </div>
            </div>
        </nav>
    </div>

    <!--Main Section-->
    <main class="flex-shrink-0">
        <div class="container py-4 px-5">
            <h2 class="border-1 border-bottom txt-color px-5 m-5">The Code for Loan App</h2>
            <div class="row px-5 row-cols-1 row-cols-md-2">
                <div class="col col-lg-8">
                    <pre class="line-numbers"><code class="language-javascript">
"use strict"

//Gets the id of an element
const $ =(id)=> {return document.getElementById(id)};

//this object will hold the loan information
//we will access this information and display
//the values entered by the user.
const loanInfo = {};

//get the values function
const getValues =()=> {

    //user input
    let loanAmount = parseFloat($("loan-amount").value);
    let term = parseFloat($("term").value);
    let rate = parseFloat($("rate").value);

    //Insert properties inside the LoanInfo Object
    loanInfo.amount = loanAmount;
    loanInfo.terms = term;
    loanInfo.interest = rate;

    //calculate monthly payment using pre-made formula
    let x = Math.pow(1 + (rate/1200), term); //Math.pow 
    let monthlyPayment = (loanAmount*x*(rate/1200))/(x-1);


    //this variable will hold the total amount of Interest paid
    let totalInterest = 0;

    //this variable will hold the remaining balance left
    let balance = 0;

    //Display the original values enterted by the user
    //format the numbers to only two decimal places
    $("desc").innerHTML = `<strong>Loan amount:</strong> $${loanInfo.amount.toFixed(2)}<br>`;
    $("desc").innerHTML += `<strong>Term in months:</strong> ${loanInfo.terms}<br>`;
    $("desc").innerHTML += `<strong>Rate:</strong> ${loanInfo.interest.toFixed(2)}%`;

    //Table Heading. Dark row
    let darkRow = $("tBody").insertRow();

    //We use this array to populate the Table Heading Row dynamically
    let tableHeading = ['Month', 'Payment', 'Principal', 'Interest', 'Total Interest', 'Balance'];
    
    //using a for loop we access the tableHeading array and add a new cell
    //at position index. We also add a special class that makes the data cells
    //bold and orange.
    for(var i = 0; i < tableHeading.length; i++) {
        let nC = darkRow.insertCell();
        nC.classList.add("my-bold");
        nC.innerHTML = tableHeading[i];
    }
    //The dark row needs indeed a class that makes the heading
    //dark
    darkRow.classList.add("table-dark");

    //We use a for loop to iterate over the total period of time
    //we access the object with the terms property
    for(var i = 1; i <= loanInfo.terms; i++) {

        //inserts a new row on every iteration
        let nRow = $("tBody").insertRow();

        /*******ALL CELLS THAT GO INSIDE THE ROW*******/

        //This cell holds the months
        let month = nRow.insertCell();
        month.innerHTML = i;
        
        //This cell holds the monthly payments
        let payment = nRow.insertCell();
        payment.innerHTML = `${monthlyPayment.toFixed(2)}`;

        //This cell holds the amount of money that goes to the principal
        let monthlyPrincipal = nRow.insertCell();
        //we find the principal with this formula
        let principal = monthlyPayment - (loanAmount * (rate/1200));
        monthlyPrincipal.innerHTML = `${principal.toFixed(2)}`;

        //This cell holds the monthly interest 
        let monthInterest = nRow.insertCell();
        let interest = loanAmount * (rate /1200);
        monthInterest.innerHTML = `${interest.toFixed(2)}`;
        
        //This cell holds the total interest paid
        let totalInterestPaid = nRow.insertCell();
        //we simply add the interest on every iteration
        //and store the value in a new variable
        totalInterest += interest;
        totalInterestPaid.innerHTML = `${totalInterest.toFixed(2)}`;

        //update the loan amount after every iteration
        loanAmount -= principal;

        //display the remaining balance
        let reamingBalance = nRow.insertCell();
        balance = loanAmount;
        reamingBalance.innerHTML =  `${balance.toFixed(2)}`;

    }

    //display monthly payments
    $("monthly-title").innerHTML = `<strong>Your Monthly Payments</strong>`;
    $("monthly-payment").innerHTML = `$${monthlyPayment.toFixed(2)}`;
    //display the total interest the customer will pay
    $("total-interest").innerHTML = `<strong>Total Interest:</strong> $${totalInterest.toFixed(2)}`;
    //display the total cost of the loan. add total interest and initial loanAmount
    $('total-cost').innerHTML = `<strong>Total cost:</strong> $${(totalInterest + loanInfo.amount).toFixed(2)}`;

}

//We load the script after the DOM loads
window.onload =()=> {
    //Event listener for the onlclick event
    $("calculate").onclick =()=> {
        //We make sure the customer enters valid data
        if($("loan-amount").value && $("term").value && $("rate").value && $("rate").value != 0){
            //we reset the body table first
            $("tBody").innerHTML = "";
            //then we call the getValues function
            getValues();
            //reset the form
            $("my-form").reset();
        } else {
            //added some feedback for the customer
            alert("Please enter valid numbers!\n rate must be greater than 0.")
        }
    }
}
                                                                     
                    </code></pre>
                </div>
                <div class="col col-lg-4">
                    <h5 class="txt-color">Code Desc.</h5>
                    <p class="lead">The Loan App is structured as folllow.</p>
                    <p>
                        Using the arrow function syntax, we have declared a function 
                        that takes a single parameter—the ID of an element inside the 
                        HTML DOC. Then it returns its value.
                    </p>
                    <p>
                        Following this, we have declared an empty object. This object will 
                        later hold the information of the loan application.
                    </p>
                    <p>
                        Now, using the arrow function syntax, we have declared another 
                        function that gets the values the user enters. This function does a 
                        few tasks. Let's break them down one by one.
                    </p>
                    <p>
                        First, we retrieved the values and even though we have used a type of 
                        number in the HTML form. Then, we have implemented an extra layer of 
                        authentication using the parseFloat method to convert a type string to a number.
                    </p>
                    <p>
                        After, we have inserted the properties into the loanInfo object declared above.
                    </p>
                    <p>
                        Now, we have used a pre-made formula to find the monthly payments the user has to make. 
                    </p>
                    <p>
                        We then declared two variables one for the total amount of interest the user has paid so far 
                        and the second for the remaining balance the user has.
                    </p>
                    <p>
                        The subsequent three statements are displaying the values entered by the user. We have accessed the 
                        loanInfo object in this case to show each property.
                    </p>
                    <p>
                        The next for loop iterates over the loanInfo object property of terms. In this case, it is the time 
                        frame the customer has to pay the loan back. We inserted a new row on every iteration, and inside that 
                        row, we added the table data of 'month,' 'payment,' 'principal,' 'interest,' 'total interest,' and 'balance.'
                    </p>
                    <p>
                        We find every value using basic math, and we have inserted those values in their respective cell.
                    </p>
                    <p>
                        At the end of the function, we display the monthly payment, the total interest, and the total cost of the loan.
                    </p>
                    <p>
                        Finally, the window object and the onload method are implemented to load the script after the DOM has loaded completely. 
                        In addition, we have added an event listener of the onlclick event for the calculate button. They are using a call-back 
                        function to call the getValues function. The form will be reset on every event, and the table body will be deleted. A 
                        simple if/else statement ensures that the customer enters valid values; otherwise, we alert a message. 
                    </p>
                </div>
            </div>
        </div>
    </main>

    <!--Footer Section-->
    <footer class="footer mt-auto py-3 text-light border-top bg-dark">
        <div class="container-fluid">
            <div class="row row-cols-1 row-cols-md-3 gy-3">
                <div class="col order-last order-lg-first">
                    <div class="text-center"><span class="text-muted">&copy;2022</span> Yohan Valdes</div>
                </div>
                <div class="col order-last d-flex align-items-center justify-content-center">
                    <a href="https://yohanvaldes.me/" target="_blank">
                        <img src="./img/logo.png" alt="Logo" height="100">   
                    </a>
                </div>
                <div class="col d-flex  align-items-center justify-content-center">
                    <div class="row">
                        <div class="col"><a href="https://www.linkedin.com/in/yohanjs/" target="_blank"><i class="fab fa-linkedin fa-2x txt-color"></i></a></div>
                        <div class="col"><a href="https://github.com/yohanJS" target="_blank"><i class="fab fa-github fa-2x txt-color"></i></a></div>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
        integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
        integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous">
    </script>
    
    <!--linked prism js-->
    <script src="./js/prism.js"></script>
    <script>
        Prism.plugins.NormalizeWhitespace.setDefaults({
        'remove-trailing': true,
        'remove-indent': true,
        'left-trim': true,
        'right-trim': true
        })
    </script>
</body>

</html>